parameter (or :_entries (unit %_Liq_entry_main) (or (nat %_Liq_entry_sellOut) (or (mumav %_Liq_entry_withdraw) (or (unit %_Liq_entry_deposit) (pair :priceUpdate %_Liq_entry_updatePrices (mumav %sellP) (pair (mumav %buyP) (mumav %extraBalance)))))));
storage (pair :storage (map %balances address nat) (pair (string %name) (pair (string %symbol) (pair (nat %decimals) (pair (nat %totalSupply) (pair (mumav %inBaker) (pair (address %owner) (pair (mumav %buyPrice) (mumav %sellPrice)))))))));
code { DUP ;
       DIP { CDR @storage_slash_1 } ;
       CAR @parameter_slash_2 ;
       DUP @parameter ;
       IF_LEFT { RENAME @nop_slash_3 ;
                 { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                 DUP @storage ;
                 { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CAR %buyPrice } ;
                 PUSH nat 1000000 ;
                 AMOUNT ;
                 MUL @micros ;
                 EDIV ;
                 IF_NONE { PUSH string "Bad amount" ;
                           FAILWITH }
                         { SENDER @addr28 ;
                           DUP @addr28 ;
                           CONTRACT unit ;
                           IF_NONE { PUSH string "Cannot use this contract from non unit contract" ;
                                     FAILWITH }
                                   { { DIP { { DIP { DUP @amount24 } ; SWAP } } ; SWAP } ;
                                     CAR @tokens ;
                                     { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                     DUP ;
                                     CAR %balances ;
                                     SWAP ;
                                     CDR ;
                                     DUP ;
                                     CAR %name ;
                                     SWAP ;
                                     CDR ;
                                     DUP ;
                                     CAR %symbol ;
                                     SWAP ;
                                     CDR ;
                                     DUP ;
                                     CAR %decimals ;
                                     SWAP ;
                                     CDR ;
                                     CDR ;
                                     { DIP { { DIP { { DIP { { DIP { { DIP { DUP @tokens } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                     { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                     { CDR ; CDR ; CDR ; CDR ; CAR %totalSupply } ;
                                     ADD ;
                                     PAIR %totalSupply ;
                                     SWAP ;
                                     PAIR %decimals ;
                                     SWAP ;
                                     PAIR %symbol ;
                                     SWAP ;
                                     PAIR %name ;
                                     SWAP ;
                                     PAIR %balances ;
                                     CDR ;
                                     { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                     CAR %balances ;
                                     { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                     CAR %balances ;
                                     { DIP { { DIP { { DIP { { DIP { { DIP { DUP @addr28 } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                     GET ;
                                     IF_NONE { PUSH nat 0 } {} ;
                                     RENAME @have61 ;
                                     { DIP { { DIP { { DIP { DUP @tokens } ; SWAP } } ; SWAP } } ; SWAP } ;
                                     ADD ;
                                     { DIP { { DIP { { DIP { { DIP { { DIP { DUP @addr28 } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                     DIP { SOME } ;
                                     DIP { DIP { DIP { DIP { DROP ; DROP } } } } ;
                                     UPDATE ;
                                     PAIR @s272 %balances ;
                                     NIL operation ;
                                     PAIR } ;
                           DIP { DROP ; DROP } } ;
                 DIP { DROP ; DROP } }
               { IF_LEFT { RENAME @amount_slash_13 ;
                           { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                           PUSH mumav 1000000000000 ;
                           PUSH mumav 1000000 ;
                           { DIP { { DIP { { DIP { DUP @amount } ; SWAP } } ; SWAP } } ; SWAP } ;
                           MUL @zamt ;
                           EDIV ;
                           IF_NONE { PUSH string "bad amount" ;
                                     FAILWITH }
                                   { SENDER @addr96 ;
                                     PUSH mumav 0 ;
                                     AMOUNT @txAmount ;
                                     COMPARE ;
                                     NEQ ;
                                     IF { PUSH string "cannot buy and sell in same transaction" ;
                                          FAILWITH }
                                        { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                          CAR %balances ;
                                          { DIP { DUP @addr96 } ; SWAP } ;
                                          GET ;
                                          IF_NONE { PUSH nat 0 } {} ;
                                          RENAME @have ;
                                          DUP @have ;
                                          { DIP { { DIP { { DIP { { DIP { { DIP { DUP @amount } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          COMPARE ;
                                          GT ;
                                          IF { PUSH string "The address does not have that much stored" ;
                                               FAILWITH }
                                             { { DIP { DUP @addr96 } ; SWAP } ;
                                               CONTRACT unit ;
                                               IF_NONE { { DIP { DUP @addr96 } ; SWAP } ;
                                                         PUSH string "Cannot recover bool contract from:" ;
                                                         PAIR ;
                                                         FAILWITH }
                                                       { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @amount } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                         { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                         { CDR ; CDR ; CDR ; CDR ; CAR %totalSupply } ;
                                                         SUB ;
                                                         DUP ;
                                                         ABS ;
                                                         SWAP ;
                                                         GE ;
                                                         IF { { DIP { DUP @dst } ; SWAP } ;
                                                              { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                              { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CDR %sellPrice } ;
                                                              { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @var92 } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                              CAR @nonMicros ;
                                                              MUL @toSend ;
                                                              UNIT ;
                                                              TRANSFER_TOKENS @op153 ;
                                                              { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @amount } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                              { DIP { { DIP { { DIP { { DIP { DUP @have } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                              SUB ;
                                                              DUP ;
                                                              ABS ;
                                                              SWAP ;
                                                              GE ;
                                                              IF { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                                   DUP ;
                                                                   CAR %balances ;
                                                                   SWAP ;
                                                                   CDR ;
                                                                   DUP ;
                                                                   CAR %name ;
                                                                   SWAP ;
                                                                   CDR ;
                                                                   DUP ;
                                                                   CAR %symbol ;
                                                                   SWAP ;
                                                                   CDR ;
                                                                   DUP ;
                                                                   CAR %decimals ;
                                                                   SWAP ;
                                                                   CDR ;
                                                                   CDR ;
                                                                   { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @newSupply } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                                   PAIR %totalSupply ;
                                                                   SWAP ;
                                                                   PAIR %decimals ;
                                                                   SWAP ;
                                                                   PAIR %symbol ;
                                                                   SWAP ;
                                                                   PAIR %name ;
                                                                   SWAP ;
                                                                   PAIR %balances ;
                                                                   CDR ;
                                                                   { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                                   CAR %balances ;
                                                                   { DIP { { DIP { DUP @newBalance } ; SWAP } } ; SWAP } ;
                                                                   { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @addr96 } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                                   DIP { SOME } ;
                                                                   DIP { DIP { DIP { DIP { DROP } } } } ;
                                                                   UPDATE ;
                                                                   PAIR @s2178 %balances ;
                                                                   NIL operation ;
                                                                   { DIP { { DIP { DUP } ; SWAP } } ; SWAP } ;
                                                                   CONS ;
                                                                   PAIR }
                                                                 { PUSH string "bad amount" ;
                                                                   FAILWITH } ;
                                                              DIP { DROP ; DROP } }
                                                            { PUSH string "bad amount" ;
                                                              FAILWITH } ;
                                                         DIP { DROP } } } ;
                                          DIP { DROP } } ;
                                     DIP { DROP ; DROP } } ;
                           DIP { DROP ; DROP } }
                         { IF_LEFT { RENAME @amt_slash_30 ;
                                     { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                     PUSH @dest (contract :UnitContract unit) "tz1byLJbJpdwmB1aScMZurx7KvsxrCGXja81" ;
                                     { DIP { { DIP { DUP @amt } ; SWAP } } ; SWAP } ;
                                     UNIT ;
                                     TRANSFER_TOKENS @op ;
                                     { DIP { DUP @storage } ; SWAP } ;
                                     { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CAR %owner } ;
                                     SOURCE @addr219 ;
                                     COMPARE ;
                                     NEQ ;
                                     IF { PUSH string "Only owner can withdraw" ;
                                          FAILWITH }
                                        { { DIP { DUP @storage } ; SWAP } ;
                                          DUP ;
                                          CAR %balances ;
                                          SWAP ;
                                          CDR ;
                                          DUP ;
                                          CAR %name ;
                                          SWAP ;
                                          CDR ;
                                          DUP ;
                                          CAR %symbol ;
                                          SWAP ;
                                          CDR ;
                                          DUP ;
                                          CAR %decimals ;
                                          SWAP ;
                                          CDR ;
                                          DUP ;
                                          CAR %totalSupply ;
                                          SWAP ;
                                          CDR ;
                                          CDR ;
                                          { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @amt } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          { CDR ; CDR ; CDR ; CDR ; CDR ; CAR %inBaker } ;
                                          ADD ;
                                          PAIR %inBaker ;
                                          SWAP ;
                                          PAIR %totalSupply ;
                                          SWAP ;
                                          PAIR %decimals ;
                                          SWAP ;
                                          PAIR %symbol ;
                                          SWAP ;
                                          PAIR %name ;
                                          SWAP ;
                                          PAIR %balances ;
                                          NIL operation ;
                                          { DIP { { DIP { DUP @op } ; SWAP } } ; SWAP } ;
                                          CONS ;
                                          PAIR } ;
                                     DIP { DROP ; DROP ; DROP } }
                                   { IF_LEFT { RENAME @nop_slash_35 ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               DUP @storage ;
                                               { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CAR %owner } ;
                                               SOURCE @addr269 ;
                                               COMPARE ;
                                               NEQ ;
                                               IF { PUSH string "Only owner can deposit" ;
                                                    FAILWITH }
                                                  { DUP @storage ;
                                                    DUP ;
                                                    CAR %balances ;
                                                    SWAP ;
                                                    CDR ;
                                                    DUP ;
                                                    CAR %name ;
                                                    SWAP ;
                                                    CDR ;
                                                    DUP ;
                                                    CAR %symbol ;
                                                    SWAP ;
                                                    CDR ;
                                                    DUP ;
                                                    CAR %decimals ;
                                                    SWAP ;
                                                    CDR ;
                                                    DUP ;
                                                    CAR %totalSupply ;
                                                    SWAP ;
                                                    CDR ;
                                                    CDR ;
                                                    AMOUNT @amount ;
                                                    { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                    { CDR ; CDR ; CDR ; CDR ; CDR ; CAR %inBaker } ;
                                                    SUB ;
                                                    PAIR %inBaker ;
                                                    SWAP ;
                                                    PAIR %totalSupply ;
                                                    SWAP ;
                                                    PAIR %decimals ;
                                                    SWAP ;
                                                    PAIR %symbol ;
                                                    SWAP ;
                                                    PAIR %name ;
                                                    SWAP ;
                                                    PAIR %balances ;
                                                    NIL operation ;
                                                    PAIR } ;
                                               DIP { DROP ; DROP } }
                                             { RENAME @info_slash_39 ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               DUP @storage ;
                                               CAR @exp307 %balances ;
                                               { DIP { { DIP { DUP @info } ; SWAP } } ; SWAP } ;
                                               CAR %sellP ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CAR %buyPrice } ;
                                               PAIR %buyPrice %sellPrice ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CAR %owner } ;
                                               PAIR %owner ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CDR ; CDR ; CAR %inBaker } ;
                                               PAIR %inBaker ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CDR ; CAR %totalSupply } ;
                                               PAIR %totalSupply ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CAR %decimals } ;
                                               PAIR %decimals ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               { CDR ; CDR ; CAR %symbol } ;
                                               PAIR %symbol ;
                                               { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                               { CDR ; CAR %name } ;
                                               PAIR %name ;
                                               { DIP { DUP @exp307 } ; SWAP } ;
                                               PAIR @s1 %balances ;
                                               DUP @s1 ;
                                               { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CDR %sellPrice } ;
                                               { DIP { { DIP { { DIP { { DIP { DUP @info } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                               { CDR ; CAR %buyP } ;
                                               PAIR %buyPrice %sellPrice ;
                                               { DIP { DUP @s1 } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CAR %owner } ;
                                               PAIR %owner ;
                                               { DIP { DUP @s1 } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CDR ; CDR ; CAR %inBaker } ;
                                               PAIR %inBaker ;
                                               { DIP { DUP @s1 } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CDR ; CAR %totalSupply } ;
                                               PAIR %totalSupply ;
                                               { DIP { DUP @s1 } ; SWAP } ;
                                               { CDR ; CDR ; CDR ; CAR %decimals } ;
                                               PAIR %decimals ;
                                               { DIP { DUP @s1 } ; SWAP } ;
                                               { CDR ; CDR ; CAR %symbol } ;
                                               PAIR %symbol ;
                                               { DIP { DUP @s1 } ; SWAP } ;
                                               { CDR ; CAR %name } ;
                                               PAIR %name ;
                                               { DIP { { DIP { DUP @exp307 } ; SWAP } } ; SWAP } ;
                                               PAIR @s2 %balances ;
                                               { DIP { { DIP { { DIP { { DIP { DUP @info } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                               CAR %sellP ;
                                               { DIP { { DIP { { DIP { { DIP { { DIP { DUP @info } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                               { CDR ; CAR %buyP } ;
                                               COMPARE ;
                                               LT ;
                                               IF { PUSH string "invalid price, enables arbitrage" ;
                                                    FAILWITH }
                                                  { { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                    { CDR ; CDR ; CDR ; CDR ; CDR ; CDR ; CAR %owner } ;
                                                    SOURCE @addr ;
                                                    COMPARE ;
                                                    NEQ ;
                                                    IF { PUSH string "Only owner can set price" ;
                                                         FAILWITH }
                                                       { DUP @s2 ;
                                                         DUP ;
                                                         CAR %balances ;
                                                         SWAP ;
                                                         CDR ;
                                                         DUP ;
                                                         CAR %name ;
                                                         SWAP ;
                                                         CDR ;
                                                         DUP ;
                                                         CAR %symbol ;
                                                         SWAP ;
                                                         CDR ;
                                                         DUP ;
                                                         CAR %decimals ;
                                                         SWAP ;
                                                         CDR ;
                                                         DUP ;
                                                         CAR %totalSupply ;
                                                         SWAP ;
                                                         CDR ;
                                                         CDR ;
                                                         { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @info } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                         { CDR ; CDR %extraBalance } ;
                                                         { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP @s2 } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                         { CDR ; CDR ; CDR ; CDR ; CDR ; CAR %inBaker } ;
                                                         ADD ;
                                                         PAIR %inBaker ;
                                                         SWAP ;
                                                         PAIR %totalSupply ;
                                                         SWAP ;
                                                         PAIR %decimals ;
                                                         SWAP ;
                                                         PAIR %symbol ;
                                                         SWAP ;
                                                         PAIR %name ;
                                                         SWAP ;
                                                         PAIR %balances ;
                                                         CDR ;
                                                         { DIP { { DIP { { DIP { DUP @exp307 } ; SWAP } } ; SWAP } } ; SWAP } ;
                                                         PAIR @s3 %balances ;
                                                         NIL operation ;
                                                         PAIR } } ;
                                               DIP { DROP ; DROP ; DROP ; DROP ; DROP } } } } } ;
       DIP { DROP ; DROP } }